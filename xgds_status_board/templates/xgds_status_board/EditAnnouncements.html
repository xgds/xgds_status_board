{% extends "base.html" %}
{% load nav %}
{% block siteSection %}Status Board{% endblock %}
{% block nav %}
{% nav "status.edit" %}
{{ block.super }}
{% include "status_subnav.html" %}
{% endblock %}
{% block headExtras %}
<style type="text/css" title="currentStyle">
@import "{{ MEDIA_URL }}jquery/css/demo_page.css";
@import "{{ MEDIA_URL }}jquery/css/demo_table.css";
@import "{{ MEDIA_URL }}jquery/css/base/jquery-ui.css";
@import "{{ MEDIA_URL }}jquery/css/smoothness/jquery-ui-1.7.2.custom.css";
</style>
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}jquery/js/jquery-1.5.1.min.js"></script>
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}jquery/js/jquery.dataTables.min.js"></script>
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}jquery/js/jquery.jeditable.js"></script>
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}jquery/js/jquery-ui.js"></script>
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}jquery/js/jquery.validate.js"></script>
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}jquery/js/jquery.dataTables.editable.js"></script>
<script type="text/javascript" charset="utf-8">
$(document).ready( function() {
var oTable = $('#announceTable').dataTable().makeEditable({
sAddURL: "{% url addAnnouncement %}",
sUpdateURL: "{% url updateAnnouncement %}",
sDeleteURL: "{% url deleteAnnouncement %}",
"aoColumns": [
null,
{
type: 'select',
onblur: 'submit',
data: '{"True":"Yes","False":"No","selected":"True"}',
},
{
type: 'select',
onblur: 'submit',
data: '{"0":"0","1":"1","2":"2","3":"3","4":"4","5":"5","6":"6","7":"7","8":"8","9":"9","selected":"9"}',
},
{
type: 'textarea',
onblur: 'submit'
},
],
});

$("#formAddNewRow").validate();

});
</script>
{% endblock headExtras %}
{% block contents %}
{% if errorMsg %}
<h3>{{ errorMsg }}</h3>
{% endif %}
<h3>Edit Announcements</h3>
<p>
<p>
<form id="formAddNewRow" action="#" title="Create announcement">
<input type="hidden" name="time" id="time" value="" rel="0" />
<label for="name">Visible?</label><br />
<select id="visible" name="visible" class="required" rel="1">
  <option value="True">Yes</option>
  <option value="False">No</option>
</select>
<br />
<label for="name">Priority</label><br />
<select id="priority" name="priority" class="required" rel="2">
{% for i in 0123456789|make_list %}
  <option
    {% if i == "9" %}
    selected="{{ i }}"
    {% endif %}
    value="{{ i }}">{{ i }}</option>
{% endfor %}
</select>
<br />
<label for="name">Content</label><br /><textarea name="content" id="content" class="required" rel="3"></textarea>
<br />
</form>
<div id="demo">
  <div class="add_delete_toolbar"></div>
  <br />
  <table cellpadding="0" cellspacing="0" border="0" class="display" id="announceTable">
    <thead>
      <tr>
	<th>Timestamp</th>
	<th type="select">Visible</th>
	<th type="select">Priority</th>
	<th>Content</th>
      </tr>
      </thead>
      <tfoot>
	<tr>
	<th>Timestamp</th>
	<th>Visible</th>
	<th>Priority</th>
	<th>Content</th>
	</tr>
      </tfoot>
      <tbody>
	{% if announcements %}
	{% for ann in announcements %}
	<tr id="{{ ann.id }}">
	  <td>{{ ann.dateCreated|date:"Y-m-d H:i:s" }}</td>
	  <td id="{{ ann.visible }}">
	    {% if ann.visible %}
	    Yes
	    {% else %}
	    No
	    {% endif %}
	  </td>
	  <td>{{ ann.priority }}</td>
	  <td>{{ ann.content }}</td>
	</tr>
	{% endfor %}
	{% endif %}
      </tbody>
    </table>
  </div>
{% endblock contents %}